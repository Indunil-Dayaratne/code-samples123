{"source":2,"revision":3,"description":"This release will create or update the nonprod Platform resources.  Review any changes carefully before approving changes.","createdBy":{"displayName":"Bob Larkin","url":"https://app.vssps.visualstudio.com/A3b7cf896-668f-44ac-acd5-310117e5d070/_apis/Identities/462e66e4-b30a-6950-9065-5997854a0e93","_links":{"avatar":{"href":"https://britgroupservices.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.NDYyZTY2ZTQtYjMwYS03OTUwLTkwNjUtNTk5Nzg1NGEwZTkz"}},"id":"462e66e4-b30a-6950-9065-5997854a0e93","uniqueName":"robert.larkin@devopsgroup.com","imageUrl":"https://britgroupservices.visualstudio.com/_api/_common/identityImage?id=462e66e4-b30a-6950-9065-5997854a0e93","descriptor":"aad.NDYyZTY2ZTQtYjMwYS03OTUwLTkwNjUtNTk5Nzg1NGEwZTkz"},"createdOn":"2018-12-17T14:51:03.657Z","modifiedBy":{"displayName":"Bob Larkin","url":"https://app.vssps.visualstudio.com/A3b7cf896-668f-44ac-acd5-310117e5d070/_apis/Identities/462e66e4-b30a-6950-9065-5997854a0e93","_links":{"avatar":{"href":"https://britgroupservices.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.NDYyZTY2ZTQtYjMwYS03OTUwLTkwNjUtNTk5Nzg1NGEwZTkz"}},"id":"462e66e4-b30a-6950-9065-5997854a0e93","uniqueName":"robert.larkin@devopsgroup.com","imageUrl":"https://britgroupservices.visualstudio.com/_api/_common/identityImage?id=462e66e4-b30a-6950-9065-5997854a0e93","descriptor":"aad.NDYyZTY2ZTQtYjMwYS03OTUwLTkwNjUtNTk5Nzg1NGEwZTkz"},"modifiedOn":"2018-12-17T14:54:47.590Z","isDeleted":false,"variables":{"app":{"value":"test"},"arm_access_key":{"value":"ADD_arm_access_key"},"arm_client_id":{"value":"ADD_arm_client_id"},"arm_client_secret":{"value":"ADD_arm_client_secret"},"arm_subscription_id":{"value":"ADD_arm_subscription_id"},"arm_tenant_id":{"value":"ADD_ arm_tenant_id"},"azure_region":{"value":"UK South"},"azure_short_region":{"value":"uks"},"contact":{"value":"App Contact Name Here"},"contact_details":{"value":"ext 123456"},"costcentre":{"value":"T123"},"description":{"value":"Test application"},"platform_state_container_name":{"value":"terraform-container-ukw-nonprod"},"platform_state_key_name":{"value":"platform.terraform.tfstate"},"platform_state_resource_group_name":{"value":"terraform-rg-ukw-nonprod"},"platform_state_storage_account_name":{"value":"terraformukwnonprod"}},"variableGroups":[],"environments":[{"id":19,"name":"Terraform Plan","rank":1,"owner":{"displayName":"Bob Larkin","url":"https://app.vssps.visualstudio.com/A3b7cf896-668f-44ac-acd5-310117e5d070/_apis/Identities/462e66e4-b30a-6950-9065-5997854a0e93","_links":{"avatar":{"href":"https://britgroupservices.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.NDYyZTY2ZTQtYjMwYS03OTUwLTkwNjUtNTk5Nzg1NGEwZTkz"}},"id":"462e66e4-b30a-6950-9065-5997854a0e93","uniqueName":"robert.larkin@devopsgroup.com","imageUrl":"https://britgroupservices.visualstudio.com/_api/_common/identityImage?id=462e66e4-b30a-6950-9065-5997854a0e93","descriptor":"aad.NDYyZTY2ZTQtYjMwYS03OTUwLTkwNjUtNTk5Nzg1NGEwZTkz"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":57}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":60},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":61}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":417,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Prod agent job","refName":null,"workflowTasks":[{"environment":{"ARM_ACCESS_KEY":"$(arm_access_key)","ARM_CLIENT_ID":"$(arm_client_id)","ARM_CLIENT_SECRET":"$(arm_client_secret)","ARM_SUBSCRIPTION_ID":"$(arm_subscription_id)","ARM_TENANT_ID":"$(arm_tenant_id)"},"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"2.*","name":"terraform init","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"script":"terraform init -backend-config=\"./backend-config/partial_config-nonprod.hcl\"","workingDirectory":"$(System.DefaultWorkingDirectory)/","failOnStderr":"false"}},{"environment":{"ARM_ACCESS_KEY":"$(arm_access_key)","ARM_CLIENT_ID":"$(arm_client_id)","ARM_CLIENT_SECRET":"$(arm_client_secret)","ARM_SUBSCRIPTION_ID":"$(arm_subscription_id)","ARM_TENANT_ID":"$(arm_tenant_id)","TF_VAR_platform_state_key_name":"$(platform_state_key_name)","TF_VAR_platform_state_container_name":"$(platform_state_container_name)","TF_VAR_project":"$(project)","TF_VAR_app":"$(app)","TF_VAR_contact":"$(contact)","TF_VAR_contact_details":"$(contact_details)","TF_VAR_costcentre":"$(costcentre)","TF_VAR_description":"$(description)","TF_VAR_platform_state_storage_account_name":"$(platform_state_storage_account_name)","TF_VAR_platform_state_resource_group_name":"$(platform_state_resource_group_name)","TF_VAR_azure_region":"$(azure_region)","TF_VAR_azure_short_region":"$(azure_short_region)"},"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"2.*","name":"terraform plan","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"script":"terraform workspace select nonprod\nterraform plan ","workingDirectory":"$(System.DefaultWorkingDirectory)/","failOnStderr":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":0,"url":"https://britgroupservices.vsrm.visualstudio.com/391c5595-43af-44f4-89ef-11ebf7f5295e/_apis/Release/releases/0","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://britgroupservices.vsrm.visualstudio.com/_apis/public/Release/badge/391c5595-43af-44f4-89ef-11ebf7f5295e/8/19"},{"id":21,"name":"Terraform Apply","rank":2,"owner":{"displayName":"Bob Larkin","url":"https://app.vssps.visualstudio.com/A3b7cf896-668f-44ac-acd5-310117e5d070/_apis/Identities/462e66e4-b30a-6950-9065-5997854a0e93","_links":{"avatar":{"href":"https://britgroupservices.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.NDYyZTY2ZTQtYjMwYS03OTUwLTkwNjUtNTk5Nzg1NGEwZTkz"}},"id":"462e66e4-b30a-6950-9065-5997854a0e93","uniqueName":"robert.larkin@devopsgroup.com","imageUrl":"https://britgroupservices.visualstudio.com/_api/_common/identityImage?id=462e66e4-b30a-6950-9065-5997854a0e93","descriptor":"aad.NDYyZTY2ZTQtYjMwYS03OTUwLTkwNjUtNTk5Nzg1NGEwZTkz"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"[Platform App]\\Approval Team Test","url":"https://app.vssps.visualstudio.com/A3b7cf896-668f-44ac-acd5-310117e5d070/_apis/Identities/fa028bbe-308f-46e8-a42c-e777188e93d0","_links":{"avatar":{"href":"https://britgroupservices.visualstudio.com/_apis/GraphProfile/MemberAvatars/vssgp.Uy0xLTktMTU1MTM3NDI0NS0yNTA1MzgyOTY5LTI5NDA0NjYyNDQtMjMxNDE0NjI4My00MTYwMDM5MjYyLTEtMzg5MzY3NzAyNS0yNTczNjY0MDY2LTI3NTUyNzIyNzItMjIwNzkyNjkxMw"}},"id":"fa028bbe-308f-46e8-a42c-e777188e93d0","uniqueName":"vstfs:///Classification/TeamProject/391c5595-43af-44f4-89ef-11ebf7f5295e\\Approval Team Test","imageUrl":"https://britgroupservices.visualstudio.com/_api/_common/identityImage?id=fa028bbe-308f-46e8-a42c-e777188e93d0","isContainer":true,"descriptor":"vssgp.Uy0xLTktMTU1MTM3NDI0NS0yNTA1MzgyOTY5LTI5NDA0NjYyNDQtMjMxNDE0NjI4My00MTYwMDM5MjYyLTEtMzg5MzY3NzAyNS0yNTczNjY0MDY2LTI3NTUyNzIyNzItMjIwNzkyNjkxMw"},"id":66}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":64},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":65}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":417,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Prod agent job","refName":null,"workflowTasks":[{"environment":{"ARM_ACCESS_KEY":"$(arm_access_key)","ARM_CLIENT_ID":"$(arm_client_id)","ARM_CLIENT_SECRET":"$(arm_client_secret)","ARM_SUBSCRIPTION_ID":"$(arm_subscription_id)","ARM_TENANT_ID":"$(arm_tenant_id)","TF_VAR_platform_state_key_name":"$(platform_state_key_name)","TF_VAR_platform_state_container_name":"$(platform_state_container_name)","TF_VAR_project":"$(project)","TF_VAR_app":"$(app)","TF_VAR_contact":"$(contact)","TF_VAR_contact_details":"$(contact_details)","TF_VAR_costcentre":"$(costcentre)","TF_VAR_description":"$(description)","TF_VAR_platform_state_storage_account_name":"$(platform_state_storage_account_name)","TF_VAR_platform_state_resource_group_name":"$(platform_state_resource_group_name)","TF_VAR_azure_region":"$(azure_region)","TF_VAR_azure_short_region":"$(azure_short_region)"},"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"2.*","name":"terraform plan","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"script":"terraform init -backend-config=\"./azure-platform/00-bootstrap/partial_config-nonprod.hcl\"\nterraform workspace select nonprod\nterraform apply  -auto-approve","workingDirectory":"$(System.DefaultWorkingDirectory)/","failOnStderr":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"Terraform Plan","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":0,"url":"https://britgroupservices.vsrm.visualstudio.com/391c5595-43af-44f4-89ef-11ebf7f5295e/_apis/Release/releases/0","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://britgroupservices.vsrm.visualstudio.com/_apis/public/Release/badge/391c5595-43af-44f4-89ef-11ebf7f5295e/8/21"}],"artifacts":[],"triggers":[],"releaseNameFormat":"Release-$(rev:r)","tags":[],"properties":{"DefinitionCreationSource":{"$type":"System.String","$value":"Other"}},"id":8,"name":"Boilerplate Pipeline - DO NOT USE - Clone only","path":"\\","projectReference":null,"url":"https://britgroupservices.vsrm.visualstudio.com/391c5595-43af-44f4-89ef-11ebf7f5295e/_apis/Release/definitions/8","_links":{"self":{"href":"https://britgroupservices.vsrm.visualstudio.com/391c5595-43af-44f4-89ef-11ebf7f5295e/_apis/Release/definitions/8"},"web":{"href":"https://britgroupservices.visualstudio.com/391c5595-43af-44f4-89ef-11ebf7f5295e/_release?definitionId=8"}}}